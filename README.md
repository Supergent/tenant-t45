# Simple Todo App

An ultra-simple todo list application with user authentication, real-time updates, and a clean minimal UI. Users can create, read, update, and delete their personal todos with instant synchronization across devices.

## Architecture

This project follows the **Convex four-layer architecture pattern**:

1. **Database Layer** (`convex/db/`) - Pure CRUD operations with typed functions
2. **Endpoint Layer** (`convex/endpoints/`) - Business logic and authentication
3. **Helper Layer** (`convex/helpers/`) - Pure utility functions
4. **Workflow Layer** (`convex/workflows/`) - External service integrations (if needed)

## Detected Components

This project uses the following Convex Components:

- **Better Auth** (`@convex-dev/better-auth`) - Authentication & session management with email/password login
- **Rate Limiter** (`@convex-dev/rate-limiter`) - API rate limiting to prevent abuse

## Tech Stack

- **Backend**: Convex (real-time database & serverless functions)
- **Frontend**: Next.js 15 App Router
- **Auth**: Better Auth with Convex adapter
- **UI**: Tailwind CSS + shadcn/ui components
- **Design System**: ReUI theme (Neutral tone, Balanced density)
- **TypeScript**: Strict mode throughout

## Prerequisites

- Node.js 18+ or 20+
- pnpm 8+
- Convex CLI (`npm install -g convex`)

## Installation

### 1. Install Dependencies

```bash
pnpm install
```

### 2. Set Up Convex

```bash
# Login to Convex (first time only)
npx convex login

# Initialize Convex project
npx convex dev --once
```

This will:
- Create a new Convex deployment
- Generate `convex/_generated/` files
- Set up your `.env.local` with `CONVEX_DEPLOYMENT` and `NEXT_PUBLIC_CONVEX_URL`

### 3. Configure Environment Variables

Copy the example environment file:

```bash
cp .env.local.example .env.local
```

Then edit `.env.local` and fill in the required values:

```bash
# Convex URLs (auto-generated by `convex dev`)
CONVEX_DEPLOYMENT=dev:your-deployment-name
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud

# Better Auth Secret (generate a secure random string)
BETTER_AUTH_SECRET=$(openssl rand -base64 32)

# Site URLs (use localhost for development)
SITE_URL=http://localhost:3000
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

### 4. Start Development Servers

```bash
# Start both Convex and Next.js
pnpm dev

# Or start them separately:
pnpm convex:dev  # Convex backend
pnpm web:dev     # Next.js frontend
```

The app will be available at `http://localhost:3000`.

## Component-Specific Setup

### Better Auth

- **What it does**: Handles user authentication, sessions, and email/password login
- **Configuration**: `convex/auth.ts` and `convex/http.ts`
- **Required env vars**: `BETTER_AUTH_SECRET`, `SITE_URL`
- **Features**: 30-day JWT sessions, email/password authentication

### Rate Limiter

- **What it does**: Prevents API abuse by limiting requests per user
- **Configuration**: `convex/rateLimiter.ts` (to be created in Phase 2)
- **Usage**: Applied to mutations like create/update/delete todos
- **Strategy**: Token bucket algorithm with burst capacity

## Project Structure

```
simple-todo-app/
├── convex/
│   ├── schema.ts              # Database schema
│   ├── convex.config.ts       # Component configuration
│   ├── auth.ts                # Better Auth setup
│   ├── http.ts                # HTTP routes for auth
│   ├── db/                    # Database layer (Phase 2)
│   ├── endpoints/             # Business logic (Phase 2)
│   └── helpers/               # Utilities (Phase 2)
├── apps/
│   └── web/                   # Next.js frontend (Phase 2)
├── package.json
├── pnpm-workspace.yaml
└── README.md
```

## Schema Overview

### Todos Table

User-scoped todo items with the following fields:

- `userId` - Owner of the todo (from Better Auth)
- `title` - Todo title (required)
- `description` - Optional detailed description
- `status` - "active" | "completed" | "archived"
- `priority` - "low" | "medium" | "high"
- `dueDate` - Optional Unix timestamp
- `createdAt` / `updatedAt` - Timestamps

**Indexes**:
- `by_user` - Query all todos for a user
- `by_user_and_status` - Filter by status
- `by_user_and_priority` - Filter by priority
- `by_user_status_and_created` - Sort active todos by creation date

## Next Steps

After Phase 1 infrastructure is complete:

1. **Phase 2: Implementation**
   - Generate database layer (`convex/db/todos.ts`)
   - Create endpoints (`convex/endpoints/todos.ts`)
   - Set up rate limiting (`convex/rateLimiter.ts`)
   - Build Next.js frontend with authentication

2. **Phase 3: UI/UX**
   - Implement shadcn/ui components
   - Apply ReUI theme tokens
   - Add real-time updates
   - Create responsive layouts

3. **Phase 4: Testing & Deployment**
   - Add unit tests with Vitest
   - Deploy to Vercel + Convex Cloud
   - Set up production environment variables

## Design System

This project uses a custom ReUI theme with:

- **Tone**: Neutral
- **Density**: Balanced
- **Primary Color**: #6366f1 (Indigo)
- **Secondary Color**: #0ea5e9 (Sky Blue)
- **Accent Color**: #f97316 (Orange)
- **Font**: Inter Variable

See `planning/theme.json` for complete design tokens.

## Scripts

- `pnpm dev` - Start both Convex and Next.js dev servers
- `pnpm web:dev` - Start Next.js only
- `pnpm convex:dev` - Start Convex only
- `pnpm build` - Build Next.js for production
- `pnpm setup` - Install dependencies and initialize Convex

## Learn More

- [Convex Documentation](https://docs.convex.dev)
- [Better Auth Documentation](https://www.better-auth.com/docs)
- [Next.js 15 Documentation](https://nextjs.org/docs)
- [Convex Components](https://docs.convex.dev/components)

## License

MIT
